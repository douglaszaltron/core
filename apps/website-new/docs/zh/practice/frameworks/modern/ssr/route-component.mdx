---
title: "路由组件"
---

# 路由组件

`@module-federation/modern-js` 支持导出路由级别组件，导出后消费者可以在对应的项目路由中消费生产者的路由。

## 如何开启此功能？

### 生产者

在 `@module-federation/modern-js` 设置 `exportRoutes: true`，即可自动导出路由组件。

```diff title="modern.config.ts"
moduleFederationPlugin({
+   exportRoutes: true,
})
```
### 消费者

#### 1. 在 `@module-federation/modern-js` 设置 `importRoutes: true`

```diff title="modern.config.ts"
moduleFederationPlugin({
+   importRoutes: true,
})
```

#### 2. 创建路由文件夹

随后在消费者项目中按照[约定式路由](https://modernjs.dev/guides/concept/entries.html#%E7%BA%A6%E5%AE%9A%E5%BC%8F%E8%B7%AF%E7%94%B1)规则，创建对应的路由文件夹 `src/routes/mf-route`。

#### 3. 创建 `mf.json`

在刚刚创建的文件夹内在创建名为 `mf.json` 的文件，其内容如下：

```json title='mf.json'
{
  "remoteName": "sub"
}
```

其中 `remoteName` 的值为 `module-federation.config.ts` 中声明的生产者名称。

#### 4. 启动项目

启动项目，会发现在新创建的路由文件夹下会生成 `layout.tsx` ，内容如下：

```ts title='layout.tsx'
// Do not edit this file. It is a auto generated.
// It will render sub's layout.
// The layout pathname is: /mf-route
// The layout route id is: mf-route/layout
```

访问对应路由，可以观察到生产者的页面已经正常加载到当前消费者项目中。


## FAQ

### 是否支持多层路由嵌套？

暂不支持，目前仅支持一层路由。
